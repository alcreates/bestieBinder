<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Survey</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
</head>

<body>
    <h1 class="text-center">Let's find your bestie!!</h1>
    <div class="container-fluid">
        <form action="" method="POST" class="form-inline" role="form">
            <div class="form-group">
                <label class="sr-only" for="">Enter Name:</label>
                <input type="email" class="form-control" id="name" placeholder="Enter Name">
            </div>
        </form>
        <form>
            <div class="radio">
                <h3>Do you like walks on the beach ? </h3>
                <label>
                    <input type="radio" name="optradio1" value="1" checked="">Option 1</label>
                <label>
                    <input type="radio" name="optradio1" value="2" checked="">Option 2</label>
                <label>
                    <input type="radio" name="optradio1" value="3" checked="">Option 3</label>
                <label>
                    <input type="radio" name="optradio1" value="4" checked="">Option 4</label>
                <label>
                    <input type="radio" name="optradio1" value="5" checked="">Option 5</label>
            </div>
        </form>
        <form>
            <h3>Are you a compassionate person? </h3>
            <div class="radio">
                <label>
                    <input type="radio" name="optradio2" value="1" checked="">Option 1</label>
                <label>
                    <input type="radio" name="optradio2" value="2" checked="">Option 2</label>
                <label>
                    <input type="radio" name="optradio2" value="3" checked="">Option 3</label>
                <label>
                    <input type="radio" name="optradio2" value="4" checked="">Option 4</label>
                <label>
                    <input type="radio" name="optradio2" value="5" checked="">Option 5</label>
            </div>
        </form>
        <form>
            <div class="radio">
                <h3>Do you consider yourself an active person ? </h3>
                <label>
                    <input type="radio" name="optradio3" value="1" checked="checked">Option 1</label>
                <label>
                    <input type="radio" name="optradio3" value="2" checked="checked">Option 2</label>
                <label>
                    <input type="radio" name="optradio3" value="3" checked="checked">Option 3</label>
                <label>
                    <input type="radio" name="optradio3" value="4" checked="checked">Option 4</label>
                <label>
                    <input type="radio" name="optradio3" value="5" checked="checked">Option 5</label>
            </div>
        </form>
        <form>
            <div class="radio">
                <h3>Do you like netflix? </h3>
                <label>
                    <input type="radio" name="optradio4" value="1" checked="checked">Option 1</label>
                <label>
                    <input type="radio" name="optradio4" value="2" checked="checked">Option 2</label>
                <label>
                    <input type="radio" name="optradio4" value="3" checked="checked">Option 3</label>
                <label>
                    <input type="radio" name="optradio4" value="4" checked="checked">Option 4</label>
                <label>
                    <input type="radio" name="optradio4" value="5" checked="checked">Option 5</label>
            </div>
        </form>
        <form>
            <div class="radio">
                <h3>is education important to you? </h3>
                <label>
                    <input type="radio" name="optradio5" value="1" checked="checked">Option 1</label>
                <label>
                    <input type="radio" name="optradio5" value="2" checked="checked">Option 2</label>
                <label>
                    <input type="radio" name="optradio5" value="3" checked="checked">Option 3</label>
                <label>
                    <input type="radio" name="optradio5" value="4" checked="checked">Option 4</label>
                <label>
                    <input type="radio" name="optradio5" value="5" checked="checked">Option 5</label>
            </div>
        </form>
        <form>
            <div class="radio">
                <h3>Do you consider yourself to be assertive ? </h3>
                <label>
                    <input type="radio" name="optradio6" value="1" checked="checked">Option 1</label>
                <label>
                    <input type="radio" name="optradio6" value="2" checked="checked">Option 2</label>
                <label>
                    <input type="radio" name="optradio6" value="3" checked="checked">Option 3</label>
                <label>
                    <input type="radio" name="optradio6" value="4" checked="checked">Option 4</label>
                <label>
                    <input type="radio" name="optradio6" value="5" checked="checked">Option 5</label>
            </div>
        </form>
        <form>
            <div class="radio">
                <h3>Is cleanliness important to you ? </h3>
                <label>
                    <input type="radio" name="optradio7" value="1" checked="checked">Option 1</label>
                <label>
                    <input type="radio" name="optradio7" value="2" checked="checked">Option 2</label>
                <label>
                    <input type="radio" name="optradio7" value="3" checked="checked">Option 3</label>
                <label>
                    <input type="radio" name="optradio7" value="4" checked="checked">Option 4</label>
                <label>
                    <input type="radio" name="optradio7" value="5" checked="checked">Option 5</label>
            </div>
        </form>
        <form>
            <div class="radio">
                <h3>Are you a social person ? </h3>
                <label>
                    <input type="radio" name="optradio8" value="1" checked="checked">Option 1</label>
                <label>
                    <input type="radio" name="optradio8" value="2" checked="checked">Option 2</label>
                <label>
                    <input type="radio" name="optradio8" value="3" checked="checked">Option 3</label>
                <label>
                    <input type="radio" name="optradio8" value="4" checked="checked">Option 4</label>
                <label>
                    <input type="radio" name="optradio8" value="5" checked="checked">Option 5</label>
            </div>
        </form>
        <form>
            <div class="radio">
                <h3>Do you like to play video games ? </h3>
                <label>
                    <input type="radio" name="optradio9" value="1" checked="checked">Option 1</label>
                <label>
                    <input type="radio" name="optradio9" value="2" checked="checked">Option 2</label>
                <label>
                    <input type="radio" name="optradio9" value="3" checked="checked">Option 3</label>
                <label>
                    <input type="radio" name="optradio9" value="4" checked="checked">Option 4</label>
                <label>
                    <input type="radio" name="optradio9" value="5" checked="checked">Option 5</label>
            </div>
        </form>
        <form>
            <div class="radio">
                <h3>Do you enjoy pizza ? </h3>
                <label>
                    <input type="radio" name="optradio10" value="1" checked="checked">Option 1</label>
                <label>
                    <input type="radio" name="optradio10" value="2" checked="checked">Option 2</label>
                <label>
                    <input type="radio" name="optradio10" value="3" checked="checked">Option 3</label>
                <label>
                    <input type="radio" name="optradio10" value="4" checked="checked">Option 4</label>
                <label>
                    <input type="radio" name="optradio10" value="5" checked="checked">Option 5</label>
            </div>
        </form>
        <button id="submitButton" type="submit" class="btn btn-primary">Submit</button>
    </div>
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <!-- Bootstrap JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script>
    var newfriendStatus = false;
    var newfriend;
    var friendsList;
    var bestie;
    var bestieDifferences = null;
    var currentURL = window.location.origin;
    $('#submitButton').on('click', function() {
        newfriend = {
            "name": $("#name").val(),
            "scores": [
                $("input[type='radio'][name='optradio1']:checked").val(),

                $("input[type='radio'][name='optradio2']:checked").val(),

                $("input[type='radio'][name='optradio3']:checked").val(),

                $("input[type='radio'][name='optradio4']:checked").val(),

                $("input[type='radio'][name='optradio5']:checked").val(),


                $("input[type='radio'][name='optradio6']:checked").val(),

                $("input[type='radio'][name='optradio7']:checked").val(),

                $("input[type='radio'][name='optradio8']:checked").val(),

                $("input[type='radio'][name='optradio9']:checked").val(),

                $("input[type='radio'][name='optradio10']:checked").val()
            ]

        };

        //console.log(newfriend);




        $.post(currentURL + "/api/friends", newfriend, function(data) {

            if (data == true) {
                alert("Yay! your are added as a newfriend!");
                newfriendStatus = true;
                bestieBinder();

            }
            if (data == false) {
                alert("Sorry not a friend");
            }

            $('#name').val('');
            $("input[type='radio'][name='optradio1']:checked").val('')

            $("input[type='radio'][name='optradio2']:checked").val('')

            $("input[type='radio'][name='optradio3']:checked").val('')

            $("input[type='radio'][name='optradio4']:checked").val('')

            $("input[type='radio'][name='optradio5']:checked").val('')


            $("input[type='radio'][name='optradio6']:checked").val('')

            $("input[type='radio'][name='optradio7']:checked").val('')

            $("input[type='radio'][name='optradio8']:checked").val('')

            $("input[type='radio'][name='optradio9']:checked").val('')

            $("input[type='radio'][name='optradio10']:checked").val('')




        });


        return false;

    });


    function bestieBinder() {
        console.log("bestieBinder running");

        $.get(currentURL + '/api/friends', function(data) {

            friendsList = data;
            for (var i = 0; i < friendsList.length - 1; i++) {
                var potentialBestie = friendsList[i];
                console.log(potentialBestie);

                console.log("this is potential bestie name : " + potentialBestie.name);
                var potentialBestieScores = potentialBestie.scores
                console.log("these are potential bestie scores : " + potentialBestieScores);
                var differences = 0
                console.log("this is starting differences : ");
                for (var j = 0; j < potentialBestieScores.length; j++) {
                    scoreDifferences = Math.abs(potentialBestie.scores[j] - newfriend.scores[j]);
                    console.log(scoreDifferences);

                    differences += scoreDifferences;






                }
                console.log("this is ending differences : " + differences);

                if (bestieDifferences == null || differences <= bestieDifferences) {
                    bestie = potentialBestie;
                   bestieDifferences = differences;
                    console.log("this is your new bestie " + bestie.name);
                 }


            }



        });


        // Add compare function:: 
    }
    </script>
</body>

</html>
